var ThreatmetrixCommonLib=function(){function t(t){"undefined"!=typeof window&&window.console&&window.console.warn&&window.console.warn(t)}function e(t){var e=h.sessionIdEndpoint;return"string"==typeof t&&t.length&&/(sky|bskyb)\.com$/.test(t)&&(e=h.rangoSessionIdEndpoint.replace("${env}",t)),e}function n(t){t&&document.getElementsByTagName("head")[0].appendChild(t)}function o(t){t&&document.getElementsByTagName("head")[0].removeChild(t)}function i(t,e){var n=document.createElement("script");return n.async=1,n.src=a(t,e),n}function r(){for(var t,e=document.getElementsByTagName("script"),n=e.length||0,o=0;n>o;o++){var i=e[o].getAttribute("src");if(i&&i.indexOf(h.tmSrc)>-1){t=e[o];break}}return t}function s(){o(r())}function a(t,e){return h.tmSrc+"?org_id="+t+"&session_id="+e}function c(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,function(){n.call(t)})}function u(t,e,n){var o=!1,i=!1;try{o=new XMLHttpRequest}catch(r){}if(o&&"withCredentials"in o)o.open("GET",t,!0);else if("undefined"!=typeof XDomainRequest){i=!0;var s="?ds="+(new Date).getTime(),a=t+s;o=new XDomainRequest,o.open("GET",a),o.onerror=function(){n("error")},o.onprogress=function(){},o.ontimeout=function(){n("timeout")},o.onload=function(){this.readyState=4,this.onreadystatechange instanceof Function&&this.onreadystatechange()}}else o&&o.open("GET",t,!0);return o.onreadystatechange=function(){if(4===o.readyState)if(i===!0){var t=JSON.parse(o.responseText);e(t)}else if(o.status>=200&&o.status<400){var t=JSON.parse(o.responseText);e(t)}else n(t)},i===!0?setTimeout(function(){o.send()},100):o.send(),o}function d(n,o,i){var r="session_id",s=function(t){o(t[r])},a=function(e){t("Error "+e)};if(n===h.testFlag)o(h.testFlag);else{var c=e(i);u(c,s,a)}}function f(e){var n="Script load timed out at "+h.timeout+"ms";return function(){t(n),e({error:n})}}function m(t,e){return function(){clearTimeout(g),t({sessionId:e})}}function l(t,e,o){g=setTimeout(f(o),h.timeout);var r=m(o,e),s=i(t,e);c(s,"load",r),n(s)}function p(e,n,o){if(e){o=o||null;try{e=e.toString(),s(),d(e,function(t){l(e,t,n)},o)}catch(i){t(i),n({error:i})}}}var g,h={tmSrc:"https://idstatus.sky.com/fp/tags.js",sessionIdEndpoint:"https://skyidapp.sky.com/threatmetrix/session",timeout:3e3,testFlag:"test",rangoSessionIdEndpoint:"https://${env}/threatmetrix/session"};return{embedThreatMetrixScript:p}}();
var SkyIdThreatMetrix=function(e,t){function i(i,n){"ThreatmetrixCommonLib"in e&&i&&ThreatmetrixCommonLib.embedThreatMetrixScript(i,function(e){if(e.sessionId){var i=t.createElement("input");i.type="hidden",i.name="threatMetrixSessionId",i.value=e.sessionId;var n=t.forms[0];n&&n.appendChild(i)}},n)}return{embed:i}}(window,document);

